matrix:
  ${{ each job in parameters.jobs }}:
    ${{ each py in parameters.pythonVersions }}:
      ${{ if not(contains('mac')) }}:
        ${{ format('Mac{2}{0}{1}', py.displayName, job.test) }}:
          PythonVersion: ${{ py.version }}
          VSCodeChannel: "stable"
          VMImageName: "macos-latest"

      ${{ if not(contains('win')) }}:
        ${{ format('Win{2}{0}{1}', py.displayName, job.test) }}:
          PythonVersion: ${{ py.version }}
          VSCodeChannel: "stable"
          VMImageName: "vs2017-win2016"

      ${{ if not(contains('linux')) }}:
        ${{ format('Linux{2}{0}{1}', py.displayName, job.test) }}:
          PythonVersion: ${{ py.version }}
          VSCodeChannel: "stable"
          VMImageName: "ubuntu-latest"
